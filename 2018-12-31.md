## Hyperledger技术与应用

### 系统逻辑架构
	
	 1. 应用程序角度：  
	 
	 (1) 身份管理  
		用户注册和登录系统后，获取到用户注册证书(ECert)，其他所有的操作都需要与用户证书关联的私钥进行签名，  
		消息接收方首先会进行签名验证，才进行后续的消息处理。网络节点同样会用到颁发的证书，比如系统启动和网络节点管理等都会对用户身份进行认证和授权。    
	 (2) 账本管理  
		授权的用户是可以查询账本数据(ledger)的，这可以通过多种方式查询，包括根据区块号、区块哈希、根据交易号查询区块。可以根据通道名称获取查询到的区块链信息。  
	 (3) 交易管理  
		应用程序通过交易管理提交交易提案(Proposal) 并获取到交易背书(Endorsement)以后，再给排序服务节点提交交易，然后打包生成区块。  
	 (4) 智能合约  
		实现“可编程的账本”(Programmable Ledger)，通过链码执行提交的交易，实现基于区块链的智能合约业务逻辑。只有智能合约才能更新账本数据，其他模块是不能直接修改状态数据(World State)的。  
		
	 2. 底层角度：
	 
	 （1）成员管理  
	 	 MSP建立一套根信任证书体系，利用PKI公钥基础来对成员身份进行验证，验证成员用户提交请求的签名。注册成员证书分为很多种。  
	 （2）共识服务  
	 	 客户端向背书节点提交提案进行签名背书，客户端将背书后的交易提交给排序服务节点进行交易排序，生成区块和排序服务  
		 广播给记账节点验证交易后写入本地账本  
	 （3）链码服务  （4）安全和密码服务  
	 
### 网络节点架构  
	
	1. 客户端节点：  
		 客户端或应用程序代表最终用户操作的实体，它必须连接到某一个peer节点或者排序服务节点上与区块链网络进行通信。  
		 客户端向背书节点Endorser提交交易提案，当收集到足够的背书后，向排序服务广播交易，进行排序，生成区块。  
	2. Peer节点：
		 所有的Peer节点都是Committer，负责验证从排序服务节点区块里的交易，维护状态数据和账本的副本.部分Peer节点可以作为背书节点。  
		 Peer节点还有一种角色是主节点(Leader Peer)，代表的是和排序服务节点通信的节点，负责从排序服务节点处获取最新的区块并在组织内部  
		 同步。可以强制设置为主节点，也可以动态选举产生。  
	3. 排序服务节点：  
		 接收包含背书签名的交易，对未打包的交易进行排序生成区块，广播给Peer节点。原子广播：同一个链上节点接收相同的消息，有同样逻辑顺序。  
	4. CA节点：  
		 Certificate Authority，服务器客户端组成，接收客户端的注册申请，返回注册密码用于用户登录，以便获取身份证书。  
		 ***在区块链网络上所有的操作都会验证用户的身份***  
		 
		 
![](https://img-blog.csdn.net/20170907105732632)
	 
